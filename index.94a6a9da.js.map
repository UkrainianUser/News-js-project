{"mappings":"iiBACA,I,EAAAA,EAAAC,EAAA,S,oDAKMC,EAAW,aACXC,EAAe,eACfC,EAAW,WAEXC,EAAWC,SAASC,cAAc,oBAExCC,OAAOC,iBAAiB,Q,EAAQC,EAAAV,EAAA,CAAAU,EAAAC,GAAAC,MAAA,SAAAC,EAAOC,G,IAI3BC,EAMJC,E,sEATD,EAAAC,EAAAC,MAAKhB,GAAS,C,0CAET,EAAAiB,EAAAC,a,OACAL,GAAc,EAAAE,EAAAC,MAAKhB,IAC3B,EAAAmB,EAAAC,YAAWP,G,gDAETQ,QAAQC,IAAIC,EAAAC,GAAMC,S,QAGhBX,GAAa,EAAAC,EAAAC,MAAKhB,IACxB,EAAAmB,EAAAC,YAAWN,G,kEAX0BF,G,mCAclC,EAAAG,EAAAC,MAAKf,KACR,EAAAc,EAAAW,MAAKzB,EAAc,KAEhB,EAAAc,EAAAC,MAAKd,KACR,EAAAa,EAAAW,MAAKxB,EAAU,IAGjB,IAAMyB,GAAa,EAAAZ,EAAAC,MAAKhB,IACxB,EAAAmB,EAAAC,YAAWO,GAEXxB,EAASI,iBAAiB,SAI1B,SAAgCK,GAC9B,GAA8B,WAA1BA,EAAMgB,OAAOC,SACf,OAEF,IAAMC,EAAgBlB,EAAMgB,OAAOG,QAAQC,GAErCC,GAAa,EAAAlB,EAAAC,MAAKhB,GAClBkC,GAAsB,EAAAnB,EAAAC,MAAKf,GAE3BkC,EAAeF,EAAWG,MAAK,SAAAC,G,OAAUA,EAAOL,KAAOF,C,IAC7DI,EAAoBI,KAAKH,IACzB,EAAApB,EAAAW,MAAKzB,EAAciC,GAEnB,IAAMK,EAAkBN,EAAWO,QAAO,SAAAC,G,OAASA,EAAMT,KAAOF,C,KAChE,EAAAX,EAAAC,YAAWmB,IACX,EAAAxB,EAAAW,MAAK1B,EAAUuC,E,IAlBjBpC,EAASI,iBAAiB,SAqB1B,SAAyBK,GACvB,GAA8B,MAA1BA,EAAMgB,OAAOC,SACf,OAEF,IAAMa,EAAc9B,EAAMgB,OAAOG,QAAQY,IAEnCC,GAAa,EAAA7B,EAAAC,MAAKhB,GAClB6C,GAAiB,EAAA9B,EAAAC,MAAKd,GAEtB4C,EAAWF,EAAWR,MAAK,SAAAC,G,OAAUA,EAAOM,MAAQD,C,IAC1DG,EAAeP,KAAKQ,IACpB,EAAA/B,EAAAW,MAAKxB,EAAU2C,E,ICrEjB,IAAAE,EAAAhD,EAAA,S,WAGA,IAAMiD,EAAU,IAAI,EAAAD,EAAAE,WAEdC,EAAsB9C,SAAS+C,eAAe,wBAE9CC,GADgBhD,SAAS+C,eAAe,kBAC9B/C,SAASC,cAAc,aAyCf,SAAfgD,EAAWC,GAClB,IAAMC,EAAOnD,SAASoD,cAAc,KACpCD,EAAKE,UAAUC,IAAI,6BACnBH,EAAKI,YAAcL,EACnBC,EAAKK,aAAa,OAAQ,KAC1BL,EAAKK,aAAa,OAAQN,GAE1B,IAAMtB,EAAK,QAAiD6B,OAAzCP,EAASQ,cAAcC,QAAQ,IAAK,MAkBvD,OAjBAR,EAAKK,aAAa,KAAM5B,GAExBuB,EAAKhD,iBAAiB,SAAS,WAC7B,IAAMyD,EAAeT,EAAKU,aAAa,QACvCjB,EAAQM,SAAWU,EACnBhB,EACGkB,kBACAC,MAAK,SAAAC,GACJA,EAASC,KAAI,SAAAC,GACXjD,QAAQC,IAAIgD,E,OAGfC,OAAM,SAAAC,GACLnD,QAAQmD,MAAMA,E,OAIbjB,C,CA9DAkB,MACJ,0GAEAN,MAAK,SAAAO,GACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAM,+BAElB,OAAOF,EAASG,M,IAEjBV,MAAK,SAAAW,GAE2B,IAAzBC,EAAaD,EAAKE,QACrBC,MAAM,EAAG,GACTZ,KAAI,SAAAf,G,OAAYA,EAAS4B,O,IAEtBC,EAAmBC,MAAMC,KAAKnC,EAAoBoC,UAAUjB,KAChE,SAAAkB,G,OAAUA,EAAOtB,aAAa,O,IAI1BuB,EAAgBV,EAAKE,QACxBxC,QAAO,SAAAc,G,OAAa6B,EAAiBM,SAASnC,EAAS4B,Q,IACvDb,KAAI,SAAAf,G,OAAYA,EAAS4B,O,IAE5BH,EAAWW,SAAQ,SAAApC,GACjB,IAAMC,EAAOF,EAAWC,GACxBJ,EAAoByC,YAAYpC,E,IAuCxC,SAAoBwB,EAAYS,GAC9B,IAAMI,EAAWxF,SAAS+C,eAAe,cACzCyC,EAASC,UAAY,GAErB,IAAMC,EAAiBf,EAAWlB,OAAO2B,GAEnCO,EAAgBX,MAAMC,KAAKO,EAASN,UAAUjB,KAAI,SAAAd,G,OACtDA,EAAKU,aAAa,O,IAGd+B,EAAmBF,EAAetD,QACtC,SAAAc,G,OAAayC,EAAcN,SAASnC,E,IAIhC2C,EAAqBD,EAAiBxD,QAC1C,SAAAc,G,OAAayB,EAAWE,MAAM,EAAG,GAAGQ,SAASnC,E,IAG/C2C,EAAmBP,SAAQ,SAAApC,GACzB,IAAMC,EAAOF,EAAWC,GAExBsC,EAASD,YAAYpC,E,IAGDqC,EAASM,iBAAiB,KAClCR,SAAQ,SAAAnC,GACpBA,EAAKE,UAAUC,IAAI,qC,IAErBuC,EAAmBP,SAAQ,SAAApC,GACrB0C,EAAiBP,SAASnC,IACfD,EAAWC,E,IAKQsC,EAA3BO,MAAMC,OAAS,QAEVR,EAALO,MAAME,UAAY,Q,CA3EvBC,CAAWvB,EAAYS,E,IAIxBjB,OAAM,SAAAC,GACLnD,QAAQmD,MAAMA,E,IA2EpBpB,EAAQ7C,iBAAiB,SAIoC,WAC3DH,SAAS+C,eAAe,cAAcM,UAAU8C,OAAO,O,IAIzDjG,OAAOkG,QAAU,SAAU5F,GACzB,IAAKA,EAAMgB,OAAO6E,QAAQ,YAAa,CACrC,IACIC,EADAC,EAAYvG,SAASwG,uBAAuB,oBAEhD,IAAKF,EAAI,EAAGA,EAAIC,EAAUE,OAAQH,IAAK,CACrC,IAAII,EAAeH,EAAUD,GACzBI,EAAarD,UAAUsD,SAAS,SAClCD,EAAarD,UAAUuD,OAAO,O,ICvItClH,EAAAC,EAAA,S,aAAA,I,aAEMkH,EAAW,kDACXC,EAAU,mCACZC,EAAM,UACNC,GAAM,UAEV,SAASC,EAAQC,GACb,IAAMC,EAAMD,EAAIE,OAEhBL,EAAMI,EAAIE,SACVL,EAAMG,EAAIG,UACVC,aAAaC,QAAQ,WAAYT,GACjCQ,aAAaC,QAAQ,YAAaR,E,UAYbS,I,OAAAC,EAAUC,MAAAC,KAAAC,U,UAAVH,I,OAAAA,EAAftH,EAAAV,EAAA,CAAAU,EAAAC,GAAAC,MAAA,SAAAC,I,+EAEF0G,EAAO,C,+BAEMa,EAAAC,QAAMC,IAAInB,EAAU,CAC7BoB,OAAQ,CACNC,IAAKX,aAAaY,QAAQ,aAAepB,EACzCqB,IAAKb,aAAaY,QAAQ,cAAgBnB,EAC1CqB,MAAOvB,EACPwB,MAAO,Y,+FAKfrH,QAAQmD,MAAKjD,EAAAC,I,0DAdgBuG,MAAAC,KAAAC,U,CAHjCU,UAAUC,YAAYC,mBAAmBxB,GANzC,SAAeyB,GACbzH,QAAQ0H,KAAK,SAAuBlF,OAAdiF,EAAIE,KAAK,OAAiBnF,OAAZiF,EAAIrH,UACxCkG,aAAasB,WAAW,WAAY9B,GACpCQ,aAAasB,WAAW,YAAa7B,E,ICnBzCtH,EAAAC,EAAA,S,aAAA,IAEMmJ,EAAc9I,SAASC,cAAc,Y,SAE3B8I,I,OAAAA,EAAf3I,EAAAV,EAAA,CAAAU,EAAAC,GAAAC,MAAA,SAAAC,I,IAES+D,EACAI,EACAsE,E,2FAFiBvB,I,cAAjBnD,EAAQnD,EAAA8H,K,SACK3E,EAASI,K,cAAtBA,EAAIvD,EAAA8H,KACJD,EAAe,mEAE2CvF,OADJyF,KAAKC,MAAMzE,EAAK0E,KAAKC,MAAM,qFAI/E5F,OAHwDiB,EAAK4E,QAAQ,GAAGF,KAAK,uLAIf3F,OAD9DiB,EAAK6E,KAAK,8FACsF9F,OAAlCiB,EAAK4E,QAAQ,GAAGE,KAAK,eAC9D/F,OAD2EiB,EAAK4E,QAAQ,GAAGG,YAAY,uCACjEhG,OAAtC,IAAIiG,KAAa,IAARhF,EAAKiF,IAASC,eAAe,Q,kBAG5Dd,EAAYe,mBAAmB,aAAcb,I,kCAGpD/H,QAAQmD,MAAKjD,EAAAC,I,2DAjBSuG,MAAAC,KAAAC,U,aAAVkB,EAAUpB,MAAAC,KAAAC,U,CAqBzBiC,E","sources":["src/js/home-page.js","src/js/categories.js","src/js/weather.js","src/js/weatherBase.js"],"sourcesContent":["\nimport { fetchNews } from './fetchNews';\nimport { load, save } from './storage';\nimport { renderCard} from './renderCard';\n\n \nconst NEWS_KEY = \"newsObject\";\nconst FAVORITE_KEY = \"favoriteNews\";\nconst READ_KEY = \"readNews\";\n\nconst cardNews = document.querySelector(\".card-news__list\");\n\nwindow.addEventListener('load', async (event) => {\n  if (!load(NEWS_KEY)) {\n    try {\n      await fetchNews();\n      const parsedNews =  load(NEWS_KEY);\n    renderCard(parsedNews);\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n  const parsedNews = load(NEWS_KEY);\n  renderCard(parsedNews);\n  })\n\nif (!load(FAVORITE_KEY)) {\n  save(FAVORITE_KEY, []);\n}\nif (!load(READ_KEY)) {\n  save(READ_KEY, []);\n}\n\nconst parsedNews = load(NEWS_KEY);\nrenderCard(parsedNews);\n\ncardNews.addEventListener(\"click\", handleClickFavoriteBtn);\ncardNews.addEventListener(\"click\", handleClickRead);\n\n\nfunction handleClickFavoriteBtn(event) {\n  if (event.target.nodeName !== \"BUTTON\") {\n    return;\n  }\n  const favoritNewsId = event.target.dataset.id;\n\n  const parsedNews = load(NEWS_KEY);\n  const parsedeFavoriteNews = load(FAVORITE_KEY);\n\n  const favoriteNews = parsedNews.find(option => option.id === favoritNewsId);\n  parsedeFavoriteNews.push(favoriteNews);\n  save(FAVORITE_KEY, parsedeFavoriteNews);\n\n  const newsAfterRemove = parsedNews.filter(value => value.id !== favoritNewsId);\n  renderCard(newsAfterRemove);\n  save(NEWS_KEY, newsAfterRemove);\n }\n\nfunction handleClickRead(event) {\n  if (event.target.nodeName !== \"A\") {\n    return;\n  }\n  const readCardUrl = event.target.dataset.url;\n \n  const parsedNews = load(NEWS_KEY);\n  const parsedReadNews = load(READ_KEY);\n  \n  const readNews = parsedNews.find(option => option.url === readCardUrl);\n  parsedReadNews.push(readNews);\n  save(READ_KEY, parsedReadNews);\n }\n \n\n\n\n","import { FetchNews } from './fetchNewsApi';\nimport { fetchNews } from './fetchNews';\n\nconst newsAPI = new FetchNews();\n\nconst categoriesContainer = document.getElementById('categories-container');\nconst menuContainer = document.getElementById('menu-container');\nconst dropbtn = document.querySelector('.dropbtn');\nfetchNewsCategory();\n\nfunction fetchNewsCategory() {\n  return fetch(\n    `https://api.nytimes.com/svc/news/v3/content/section-list.json?api-key=UPfW6vgRuPuGF8dWeumSDLnq86AeLhG1`\n  )\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      return response.json();\n    })\n    .then(data => {\n      // Создаем кнопки для первых 5 категорий\n      const categories = data.results\n        .slice(0, 5)\n        .map(category => category.section);\n\n      const buttonCategories = Array.from(categoriesContainer.children).map(\n        button => button.getAttribute('name')\n      );\n\n      // Найти категории, которых еще нет в ссылках\n      const newCategories = data.results\n        .filter(category => !buttonCategories.includes(category.section))\n        .map(category => category.section);\n\n      categories.forEach(category => {\n        const link = createLink(category);\n        categoriesContainer.appendChild(link);\n      });\n      createMenu(categories, newCategories);\n      // const menu = createMenu(data.results, newCategories);\n      // menuContainer.appendChild(menu);\n    })\n    .catch(error => {\n      console.error(error);\n    });\n}\n// Функция для создания ссылки\nfunction createLink(category) {\n  const link = document.createElement('a');\n  link.classList.add('categories-container_link');\n  link.textContent = category;\n  link.setAttribute('href', '#');\n  link.setAttribute('name', category);\n\n  const id = `link-${category.toLowerCase().replace(' ', '-')}`;\n  link.setAttribute('id', id);\n\n  link.addEventListener('click', () => {\n    const categoryName = link.getAttribute('name');\n    newsAPI.category = categoryName;\n    newsAPI\n      .fetchByCategory()\n      .then(articles => {\n        articles.map(article => {\n          console.log(article);\n        });\n      })\n      .catch(error => {\n        console.error(error);\n      });\n  });\n\n  return link;\n}\n\nfunction createMenu(categories, newCategories) {\n  const dropdown = document.getElementById('myDropdown');\n  dropdown.innerHTML = '';\n\n  const menuCategories = categories.concat(newCategories);\n\n  const existingLinks = Array.from(dropdown.children).map(link =>\n    link.getAttribute('name')\n  );\n\n  const uniqueCategories = menuCategories.filter(\n    category => !existingLinks.includes(category)\n  );\n\n  // Удаляем первые пять категорий из массива uniqueCategories\n  const filteredCategories = uniqueCategories.filter(\n    category => !categories.slice(0, 5).includes(category)\n  );\n\n  filteredCategories.forEach(category => {\n    const link = createLink(category);\n\n    dropdown.appendChild(link);\n  });\n\n  const dropdownLinks = dropdown.querySelectorAll('a');\n  dropdownLinks.forEach(link => {\n    link.classList.add('categories-container_link_dropDown');\n  });\n  filteredCategories.forEach(category => {\n    if (uniqueCategories.includes(category)) {\n      const link = createLink(category);\n    }\n  });\n\n  // установить фиксированную высоту для меню\n  dropdown.style.height = '380px';\n  // добавить скролл\n  dropdown.style.overflowY = 'scroll';\n\n  return dropdown;\n}\n\ndropbtn.addEventListener('click', onDropBtn);\n\n//  Когда пользователь нажимает на кнопку,\n// переключаться между скрытием и отображением выпадающего содержимого\nfunction onDropBtn() {\n  document.getElementById('myDropdown').classList.toggle('show');\n}\n\n// Закрываем раскрывающийся список, если пользователь щелкает за его пределами\nwindow.onclick = function (event) {\n  if (!event.target.matches('.dropbtn')) {\n    var dropdowns = document.getElementsByClassName('dropdown-content');\n    var i;\n    for (i = 0; i < dropdowns.length; i++) {\n      var openDropdown = dropdowns[i];\n      if (openDropdown.classList.contains('show')) {\n        openDropdown.classList.remove('show');\n      }\n    }\n  }\n};\n","import axios from \"axios\";\n\nconst BASE_URL = 'https://api.openweathermap.org/data/2.5/weather'\nconst KEY_API = '8263fe3022d7c26abc78442437d890b7';\nlet lat = 40.711217;\nlet lon = -74.006889;\n\nfunction success(pos) {\n    const crd = pos.coords;\n    \n    lat = crd.latitude;\n    lon = crd.longitude;\n    localStorage.setItem('latitude', lat);\n    localStorage.setItem('longitude', lon);\n  };\n  \n  function error(err) {\n    console.warn(`ERROR(${err.code}): ${err.message}`);\n    localStorage.removeItem('latitude', lat); \n    localStorage.removeItem('longitude', lon);\n  };\n  \n  navigator.geolocation.getCurrentPosition(success, error);\n  \n\n   export async function getWeather() {\n    try {\n    if (success) {\n      \n        return await axios.get(BASE_URL, {\n            params: {\n              lat: localStorage.getItem('latitude') || lat,\n              lon: localStorage.getItem('longitude') || lon,\n              appid: KEY_API,\n              units: 'metric',\n            },\n          }); \n    }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n","import weather, { getWeather }  from \"./weather\";\n\nconst weatherForm = document.querySelector('.weather');\n\n async function addWeather() {\n  try {\n    const response = await getWeather();\n    const data = await response.data;\n    const createMarkup = `\n    <div class=\"weather__block\"><span class=\"weather__number\">${Math.round(data.main.temp)}&#176;</span>\n      <div class = \"weather__location\"><h2 class=\"weather__title\">${data.weather[0].main}</h2>\n      <p class=\"weather__city\"><svg class=\"weather__svg\" width=\"16\" height=\"16\">\n      <use href=\"/symbol-defs.33050382.svg#icon-carbon_location-filled\"></use>\n    </svg>${data.name}</p></div></div>\n      <img class=\"weather__icon\" src=\"https://openweathermap.org/img/wn/${data.weather[0].icon}.png\" alt=\"${data.weather[0].description}\">\n      <p class=\"weather__date\">${new Date(data.dt*1000).toDateString()}</p>`\n      \n\n    return weatherForm.insertAdjacentHTML('afterbegin', createMarkup);\n  \n  } catch (error) {\n    console.error(error);\n  }\n }\n\n addWeather();\n\n\n"],"names":["$bpxeT","parcelRequire","$e0d740ca6c7bcb9c$var$NEWS_KEY","$e0d740ca6c7bcb9c$var$FAVORITE_KEY","$e0d740ca6c7bcb9c$var$READ_KEY","$e0d740ca6c7bcb9c$var$cardNews","document","querySelector","window","addEventListener","$parcel$interopDefault","$2TvXO","mark","_callee","event","parsedNews2","parsedNews1","$jzQFI","load","$cUSdw","fetchNews","$5I0aQ","renderCard","console","log","_ctx","t0","message","save","$e0d740ca6c7bcb9c$var$parsedNews","target","nodeName","favoritNewsId","dataset","id","parsedNews3","parsedeFavoriteNews","favoriteNews","find","option","push","newsAfterRemove","filter","value","readCardUrl","url","parsedNews4","parsedReadNews","readNews","$5dKDZ","$7035cf87bda54340$var$newsAPI","FetchNews","$7035cf87bda54340$var$categoriesContainer","getElementById","$7035cf87bda54340$var$dropbtn","$7035cf87bda54340$var$createLink","category","link","createElement","classList","add","textContent","setAttribute","concat","toLowerCase","replace","categoryName","getAttribute","fetchByCategory","then","articles","map","article","catch","error","fetch","response","ok","Error","json","data","categories","results","slice","section","buttonCategories","Array","from","children","button","newCategories","includes","forEach","appendChild","dropdown","innerHTML","menuCategories","existingLinks","uniqueCategories","filteredCategories","querySelectorAll","style","height","overflowY","$7035cf87bda54340$var$createMenu","toggle","onclick","matches","i","dropdowns","getElementsByClassName","length","openDropdown","contains","remove","$b7c37e8f14632f7d$var$BASE_URL","$b7c37e8f14632f7d$var$KEY_API","$b7c37e8f14632f7d$var$lat","$b7c37e8f14632f7d$var$lon","$b7c37e8f14632f7d$var$success","pos","crd","coords","latitude","longitude","localStorage","setItem","$b7c37e8f14632f7d$export$ce1081f0c9899666","$b7c37e8f14632f7d$var$_getWeather","apply","this","arguments","$dIxxU","default","get","params","lat","getItem","lon","appid","units","navigator","geolocation","getCurrentPosition","err","warn","code","removeItem","$656b26f4c9831065$var$weatherForm","$656b26f4c9831065$var$_addWeather","createMarkup","sent","Math","round","main","temp","weather","name","icon","description","Date","dt","toDateString","insertAdjacentHTML","$656b26f4c9831065$var$addWeather"],"version":3,"file":"index.94a6a9da.js.map"}